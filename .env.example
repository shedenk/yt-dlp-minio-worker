# Environment Configuration Template
# Copy this file to .env and fill in your actual values

# ============================================
# Service Role Configuration
# ============================================
# ROLE: Determines which service to run
# - "api": Run FastAPI service (default)
# - "worker": Run background worker
ROLE=worker

# ============================================
# Redis Configuration
# ============================================
# REDIS_URL: Connection string for Redis
# Format: redis://[host]:[port]/[db]
REDIS_URL=redis://redis:6379/0

# ============================================
# MinIO Configuration
# ============================================
# MINIO_STRICT: If true, worker will fail if MinIO is not configured
MINIO_STRICT=true

# MINIO_ENDPOINT: MinIO server endpoint (without http/https)
# Example: minio:9000 or s3.amazonaws.com
MINIO_ENDPOINT=minio:9000

# MINIO_ACCESS_KEY: MinIO access key (like AWS Access Key ID)
MINIO_ACCESS_KEY=your-access-key-here

# MINIO_SECRET_KEY: MinIO secret key (like AWS Secret Access Key)
MINIO_SECRET_KEY=your-secret-key-here

# MINIO_BUCKET: Bucket name for storing videos
MINIO_BUCKET=videos

# MINIO_PUBLIC_BASE_URL: Public URL base for accessing uploaded files
# This will be used to construct public URLs for downloaded files
# Example: https://cdn.yourdomain.com/videos
MINIO_PUBLIC_BASE_URL=https://cdn.yourdomain.com/videos

# MINIO_SECURE: Use HTTPS for MinIO connection
# - "true": Use HTTPS (for production)
# - "false": Use HTTP (for local development)
MINIO_SECURE=false

# ============================================
# Worker Configuration
# ============================================
# AUTO_DELETE_LOCAL: Delete local files after uploading to MinIO
# - "true": Delete files (recommended when using MinIO)
# - "false": Keep local files
AUTO_DELETE_LOCAL=true

# CLEANUP_MAX_AGE: Maximum age (in seconds) for files before cleanup
# Default: 7200 (2 hours)
CLEANUP_MAX_AGE=7200

# WORKER_CONCURRENCY: Number of concurrent download workers
# Default: 3 (process multiple jobs in parallel)
# Set to 1 for sequential processing
WORKER_CONCURRENCY=3

# MAX_RETRIES: Maximum retry attempts for failed jobs
# Default: 3
MAX_RETRIES=3

# JOB_TIMEOUT: Maximum time (in seconds) allowed per job
# Default: 3600 (1 hour)
# Jobs exceeding this timeout will be killed and retried
JOB_TIMEOUT=3600

# RETRY_BACKOFF_BASE: Base delay (in seconds) for exponential backoff
# Default: 60 (1 minute)
# Actual delay = RETRY_BACKOFF_BASE * (2 ^ retry_attempt)
# Example: 60s, 120s, 240s for attempts 1, 2, 3
RETRY_BACKOFF_BASE=60

# ============================================
# Download Configuration
# ============================================
# DOWNLOAD_DIR: Directory for temporary downloads
DOWNLOAD_DIR=/data/downloads

# COOKIES_PATH: Path to cookies.txt file for authenticated downloads
# Use browser extension to export cookies from YouTube
COOKIES_PATH=/data/cookies/cookies.txt

# ENABLE_DOWNLOAD: Enable direct downloads via API (for api role)
# - "true": Enable downloads
# - "false": Disable downloads (only enqueue jobs)
ENABLE_DOWNLOAD=false
